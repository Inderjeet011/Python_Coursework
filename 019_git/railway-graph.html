<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NI Railways Network Graph</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            padding: 20px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
        }
        .graph-container {
            padding: 20px;
            position: relative;
        }
        .node {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .node:hover {
            transform: scale(1.2);
        }
        .node circle {
            stroke: #fff;
            stroke-width: 3px;
        }
        .node text {
            font-size: 12px;
            font-weight: bold;
            text-anchor: middle;
            dominant-baseline: middle;
            fill: #333;
        }
        .link {
            stroke: #999;
            stroke-width: 3;
            stroke-opacity: 0.8;
        }
        .legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.95);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 300px;
        }
        .legend h3 {
            margin: 0 0 15px 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        .legend-item {
            margin: 8px 0;
            padding: 5px;
            border-radius: 5px;
            font-size: 14px;
        }
        .legend-item.master { background: #e74c3c; color: white; }
        .legend-item.uk-rol { background: #3498db; color: white; }
        .legend-item.lrn-harbour { background: #f39c12; color: white; }
        .legend-item.derry { background: #27ae60; color: white; }
        .tooltip {
            position: absolute;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸš‚ Northern Ireland Railways Network Graph</h1>
        </div>
        
        <div class="graph-container">
            <div class="legend">
                <h3>Railway Lines</h3>
                <div class="legend-item master">Master Line: Lanyon Place â†’ Bangor</div>
                <div class="legend-item uk-rol">UK-ROL Line: Lanyon Place â†’ Newry</div>
                <div class="legend-item lrn-harbour">LRN Harbour Line: Lanyon Place â†’ Larne Harbour</div>
                <div class="legend-item derry">Derry-Londonderry Line: Lanyon Place â†’ Derry-Londonderry</div>
            </div>
            
            <div id="graph"></div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // Railway network data
        const railwayData = {
            nodes: [
                // Central hub
                { id: "Lanyon Place", x: 400, y: 300, group: "hub", size: 20 },
                
                // Master line (red)
                { id: "Bangor", x: 600, y: 300, group: "master", size: 15 },
                
                // UK-ROL line (blue)
                { id: "Great Victoria St", x: 400, y: 200, group: "uk-rol", size: 15 },
                { id: "Lisburn", x: 400, y: 150, group: "uk-rol", size: 15 },
                { id: "Portadown", x: 400, y: 100, group: "uk-rol", size: 15 },
                { id: "Newry", x: 400, y: 50, group: "uk-rol", size: 15 },
                
                // LRN Harbour line (orange)
                { id: "Larne Harbour", x: 200, y: 300, group: "lrn-harbour", size: 15 },
                
                // Derry-Londonderry line (green)
                { id: "Antrim", x: 400, y: 400, group: "derry", size: 15 },
                { id: "Ballymena", x: 400, y: 450, group: "derry", size: 15 },
                { id: "Ballymoney", x: 400, y: 500, group: "derry", size: 15 },
                { id: "Coleraine", x: 400, y: 550, group: "derry", size: 15 },
                { id: "Derry-Londonderry", x: 400, y: 600, group: "derry", size: 15 }
            ],
            links: [
                // Master line
                { source: "Lanyon Place", target: "Bangor", group: "master" },
                
                // UK-ROL line
                { source: "Lanyon Place", target: "Great Victoria St", group: "uk-rol" },
                { source: "Great Victoria St", target: "Lisburn", group: "uk-rol" },
                { source: "Lisburn", target: "Portadown", group: "uk-rol" },
                { source: "Portadown", target: "Newry", group: "uk-rol" },
                
                // LRN Harbour line
                { source: "Lanyon Place", target: "Larne Harbour", group: "lrn-harbour" },
                
                // Derry-Londonderry line
                { source: "Lanyon Place", target: "Antrim", group: "derry" },
                { source: "Antrim", target: "Ballymena", group: "derry" },
                { source: "Ballymena", target: "Ballymoney", group: "derry" },
                { source: "Ballymoney", target: "Coleraine", group: "derry" },
                { source: "Coleraine", target: "Derry-Londonderry", group: "derry" }
            ]
        };

        // Color scheme
        const colors = {
            hub: "#2c3e50",
            master: "#e74c3c",
            "uk-rol": "#3498db",
            "lrn-harbour": "#f39c12",
            derry: "#27ae60"
        };

        // Set up the SVG
        const width = 800;
        const height = 700;
        const margin = { top: 20, right: 20, bottom: 20, left: 20 };

        const svg = d3.select("#graph")
            .append("svg")
            .attr("width", width)
            .attr("height", height)
            .style("background", "#f8f9fa");

        // Create the graph
        const g = svg.append("g");

        // Add links
        const links = g.selectAll(".link")
            .data(railwayData.links)
            .enter()
            .append("line")
            .attr("class", "link")
            .attr("x1", d => {
                const sourceNode = railwayData.nodes.find(n => n.id === d.source);
                return sourceNode ? sourceNode.x : 0;
            })
            .attr("y1", d => {
                const sourceNode = railwayData.nodes.find(n => n.id === d.source);
                return sourceNode ? sourceNode.y : 0;
            })
            .attr("x2", d => {
                const targetNode = railwayData.nodes.find(n => n.id === d.target);
                return targetNode ? targetNode.x : 0;
            })
            .attr("y2", d => {
                const targetNode = railwayData.nodes.find(n => n.id === d.target);
                return targetNode ? targetNode.y : 0;
            })
            .style("stroke", d => colors[d.group])
            .style("stroke-width", 4)
            .style("stroke-opacity", 0.8);

        // Add nodes
        const nodes = g.selectAll(".node")
            .data(railwayData.nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .attr("transform", d => `translate(${d.x}, ${d.y})`);

        // Add circles to nodes
        nodes.append("circle")
            .attr("r", d => d.size)
            .style("fill", d => colors[d.group])
            .style("stroke", "#fff")
            .style("stroke-width", 3);

        // Add labels to nodes
        nodes.append("text")
            .text(d => d.id)
            .style("font-size", "11px")
            .style("font-weight", "bold")
            .style("fill", "#333")
            .style("text-anchor", "middle")
            .style("dominant-baseline", "middle")
            .attr("dy", d => d.size + 20);

        // Add tooltip functionality
        const tooltip = d3.select("#tooltip");

        nodes.on("mouseover", function(event, d) {
            tooltip.style("opacity", 1)
                .html(`<strong>${d.id}</strong><br/>Line: ${d.group}`)
                .style("left", (event.pageX + 10) + "px")
                .style("top", (event.pageY - 10) + "px");
        })
        .on("mouseout", function() {
            tooltip.style("opacity", 0);
        });

        // Add some animation
        nodes.style("opacity", 0)
            .transition()
            .duration(1000)
            .style("opacity", 1);

        links.style("opacity", 0)
            .transition()
            .duration(1000)
            .delay(500)
            .style("opacity", 0.8);
    </script>
</body>
</html>
